// SPDX-License-Identifier: GPL-2.0-only
/*
 * Copyright (C) 2024 Ryan Agius - ryagius17@gmail.com
 */
/dts-v1/;

#include "am335x-boneblack.dts"

/ {
	model = "TI AM335x BeagleBone Black with OpenBMC support";
	compatible = "ti,am335x-bone-black-openbmc", "ti,am335x-bone-black", "ti,am335x-bone", "ti,am33xx";
};

// rename LEDs to a more BCM appropriate naming scheme
/ {
    leds {
        // USR0
        led2 {
            label = "fault";
            /delete-property/ linux,default-trigger;
        };
        // USR1
		led3 {
            label = "identify";
            /delete-property/ linux,default-trigger;
        };
        // USR2
		led4 {
            label = "status";
            /delete-property/ linux,default-trigger;
        };
        // USR3
		led5 {
            label = "power";
            /delete-property/ linux,default-trigger;
        };
    };
};

// set pinmux back to UART1 P9_24, P9_26 
&am33xx_pinmux {
    uart1_pins: uart1_pins {
        pinctrl-single,pins = <
            AM33XX_PADCONF(AM335X_PIN_UART1_TXD, PIN_OUTPUT, MUX_MODE0)	/* P9_24 uart1_txd.uart1_txd */
            AM33XX_PADCONF(AM335X_PIN_UART1_RXD, PIN_INPUT, MUX_MODE0)	/* P9_26 uart1_rxd.uart1_rxd */
        >;
    };
};

// enable UART 1
&uart1 {
	/* sudo agetty 115200 ttyS1 */
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&uart1_pins>;
};